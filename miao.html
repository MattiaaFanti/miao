<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <title>Mirror di CalcioStreaming senza Ads</title>
  <style>
    body {
      margin: 0;
      padding: 0;
      overflow: hidden;
    }
    iframe {
      width: 100%;
      height: 100vh;
      border: none;
    }
  </style>
</head>
<body>
  <iframe id="mirrorFrame" src="https://calciostreaming.shop/"></iframe>

  <script>
    console.log("Inizio script di blocco ads e controllo navigazione");

    // Funzione per gestire iframe e bloccare ads/pop-up
    function manageIframe(iframe) {
      try {
        const iframeWindow = iframe.contentWindow;
        const iframeDoc = iframe.contentDocument || iframeWindow.document;
        console.log("Iframe caricato, applico controlli");

        // 1. Blocca pop-up
        iframeWindow.open = function () {
          console.log("Tentativo di pop-up bloccato nell'iframe");
          return null;
        };

        // 2. Intercetta i click sui link e forza la navigazione nell'iframe
        iframeDoc.querySelectorAll('a').forEach(link => {
          link.addEventListener('click', (e) => {
            e.preventDefault(); // Impedisci il comportamento predefinito
            const href = link.getAttribute('href');
            if (href && !href.startsWith('#')) { // Ignora ancore interne
              console.log("Link intercettato, apro nell'iframe:", href);
              iframe.src = href; // Aggiorna l'iframe con il nuovo URL
            }
          });
        });

      } catch (e) {
        console.log("Errore: accesso al DOM dell'iframe limitato (same-origin policy)", e);
      }
    }

    // Esegui quando l'iframe si carica
    const iframe = document.getElementById("mirrorFrame");
    iframe.addEventListener("load", () => {
      console.log("Iframe completamente caricato");
      manageIframe(iframe);
    });

    // Riprova a gestire i link quando l'utente naviga
    iframe.addEventListener("click", () => {
      setTimeout(() => manageIframe(iframe), 500); // Ritardo per il caricamento della nuova pagina
    });

    // Blocca pop-up globali
    window.open = function () {
      console.log("Tentativo di pop-up globale bloccato");
      return null;
    };
  </script>
</body>
</html>
