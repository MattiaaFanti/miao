<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <title>Mirror di CalcioStreaming senza Ads</title>
  <style>
    body {
      margin: 0;
      padding: 0;
      overflow: hidden;
    }
    iframe {
      width: 100%;
      height: 100vh;
      border: none;
    }
    /* Nascondi elementi potenzialmente pubblicitari */
    [class*="ad"], [id*="ad"], .banner, .popup, [style*="position: fixed"], [style*="z-index: 999"] {
      display: none !important;
    }
  </style>
</head>
<body>
  <!-- Iframe che carica il sito target -->
  <iframe id="mirrorFrame" src="https://calciostreaming.shop/"></iframe>

  <script>
    // Funzione per bloccare ads e pop-up senza dipendere da domini
    function blockAds(iframe) {
      try {
        const iframeWindow = iframe.contentWindow;
        const iframeDoc = iframe.contentDocument || iframeWindow.document;

        // 1. Blocca tutti i pop-up
        iframeWindow.open = function () {
          console.log('Pop-up bloccato');
          return null;
        };

        // 2. Intercetta richieste sospette basate su pattern generici
        const originalFetch = iframeWindow.fetch;
        iframeWindow.fetch = function (url) {
          // Blocca richieste con parole chiave comuni nelle ads
          const adKeywords = ['ad', 'banner', 'popup', 'sponsor', 'track'];
          if (adKeywords.some(keyword => url.toLowerCase().includes(keyword))) {
            console.log('Richiesta sospetta bloccata:', url);
            return Promise.reject('Bloccata');
          }
          return originalFetch.apply(this, arguments);
        };

        // 3. Rimuovi script sospetti (es. con window.open o eval)
        iframeDoc.querySelectorAll('script').forEach(script => {
          const content = script.innerHTML.toLowerCase();
          if (content.includes('window.open') || content.includes('eval') || content.includes('document.write')) {
            console.log('Script sospetto rimosso');
            script.remove();
          }
        });

        // 4. Rimuovi iframe e elementi con caratteristiche di ads
        const adSelectors = [
          '[class*="ad"]', '[id*="ad"]', '.banner', '.popup',
          'iframe:not(#mirrorFrame)', // Evita di rimuovere il nostro iframe
          '[style*="position: fixed"]', // Elementi fissi (tipici dei pop-up)
          '[style*="z-index: 999"]'    // Elementi con z-index alto
        ].join(', ');
        iframeDoc.querySelectorAll(adSelectors).forEach(el => {
          console.log('Elemento pubblicitario rimosso:', el);
          el.remove();
        });

      } catch (e) {
        console.log('Accesso al DOM dell\'iframe limitato:', e);
      }
    }

    // Esegui il blocco quando l'iframe si carica
    const iframe = document.getElementById('mirrorFrame');
    iframe.addEventListener('load', () => {
      blockAds(iframe);
    });

    // Riprova a bloccare ads quando l'utente naviga nell'iframe
    iframe.contentWindow.addEventListener('click', () => {
      setTimeout(() => blockAds(iframe), 500); // Ritardo per il caricamento
    });

    // Blocca pop-up a livello globale (per ads che escono dall'iframe)
    window.onbeforeunload = function () {
      return 'Stai tentando di aprire una pagina di ads?';
    };
    window.open = function () {
      console.log('Pop-up globale bloccato');
      return null;
    };
  </script>
</body>
</html>
